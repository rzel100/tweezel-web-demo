import{s as S,u as b,r as d,k as x,o as i,c as p,e as u,l as y,a as o}from"./index.94c26da9.js";const _={class:"flex h-screen overflow-auto flex-col"},k={class:"grow flex"},T=["srcdoc"],z={class:"grow flex flex-col"},C=o("p",{class:"grow-0 p-2 border-b-2 bg-black/20"},"Play Story",-1),D={key:0},L={key:1,class:"grow flex flex-col m-5 gap-5"},U={setup(N){const e=S(),t=b().params.id,f=new URL("/assets/sugarcube-2-temp.1b2a47fa.txt",self.location).href,c=d(""),n=d(!1),g=d(!0);sessionStorage.clear(),e.story[t].passage.length==0&&x.back(),fetch(f).then(a=>a.text()).then(a=>{let s="",r="";for(let l=0;l<e.story[t].passage.length;l++){let w=e.story[t].passage[l].data.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");r='<tw-passagedata pid="'+e.story[t].passage[l].pid+'" name="'+e.story[t].passage[l].name+'" tags="" position="100,100" size="100,100">'+w+"</tw-passagedata>",s=s+r}let v=a.replace(/tweezelStoryTitle/g,e.story[t].title).replace(/tweezelStoryIfid/g,e.story[t].ifid).replace(/tweezelStoryStartNode/g,e.story[t].startNode).replace(/tweezelStoryUserStyle/g,e.story[t].userStyle).replace(/tweezelStoryUserScript/g,e.story[t].userScript).replace(/tweezelStoryPassage/g,s);c.value=v});function m(){g.value=!1}function h(){let a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(c.value)),a.setAttribute("download",e.story[t].title+".html"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}return(a,s)=>(i(),p("div",_,[u(o("div",k,[o("iframe",{id:"storyWindow",class:"grow",srcdoc:c.value,onLoad:s[0]||(s[0]=r=>m())},null,40,T)],512),[[y,n.value]]),u(o("div",z,[C,g.value?(i(),p("div",D,"Loading The Game... Please Wait A Bit...")):(i(),p("div",L,[o("button",{onClick:s[1]||(s[1]=r=>n.value=!0),class:"bg-green-300 text-black p-2 rounded"},"Play The Story"),o("button",{onClick:s[2]||(s[2]=r=>h()),class:"bg-red-300 text-black p-2 rounded"},"Export The Story")]))],512),[[y,!n.value]])]))}};export{U as default};
